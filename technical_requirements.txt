# Техническое задание: Платформа-конструктор сайтов (аналог Tilda)

## 1. Общее описание
Разработка полного аналога site builder от Tilda. Платформа предназначена для создания многостраничных сайтов с помощью блочного конструктора без необходимости написания кода.

## 2. Технологический стек и архитектура
Проект разделен на три основные части: **frontend**, **backend**, **admin**.

**Frontend:**
- Фреймворк: Vue 3 (строго Composition API)
- Язык: TypeScript
- UI Библиотека: Vuetify 3
- State Management: Pinia
- HTTP Клиент: Axios (инстанс настроен в `/src/api`)
- docker

**Backend & Инфраструктура:**
- База данных MongoDB (хранение структуры блоков и страниц)
- Фоновые задачи: Celery
- Веб-сервер: Nginx
- python: 3.11 fastapi async


**admin**
находится /Users/boss/PycharmProjects/ai-business-advisor/admin
В другом проекте
В админке добавляются ip серверов и каждый можно отдельно настроить по API


tilda_source_codes - пример кода из Tilda для понимания структуры блоков и страниц. Этот код не должен быть коммитирован в репозиторий (указано в .gitignore).


## логика структуры приложения:
- на бекенде хранятся html код блоков и страниц в виде шаблонов. Каждый блок имеет json описание с параметрами для настройки (цвета, шрифты, отступы и т.д.)
- на фронтенде пользователь выбирает блоки из библиотеки, настраивает их параметры, и конструктор генерирует json, который сохраняется на сервере как структура страницы. При отображении страницы конструктор берет эту структуру и генерирует html код, используя шаблоны блоков с бекенда.
- при загрузке готового сайта пользователь может выделить все папки и файлы, загрузить их в конструктор, и он распознает это как сайт, извлекая структуру сайта (страниц)
- При нажатии на кнопку "Опубликовать" конструктор генерирует финальный html код для каждой страницы, который сохраняется на сервере и становится доступным по URL.
- Генерация адаптивного дизайна осуществляется через шаблоны блоков, которые автоматически подстраиваются под разные устройства (десктоп, планшет, смартфон) на основе заданных параметров.

## 3. Функциональные требования
0. Возможность загрузить готовый сайт выделив все папки и файлы и загрузив их в конструктор. Конструктор должен распознать это как сайт
1. **Блочный редактор:** Создание страниц путем добавления и настройки готовых блоков (аналогично Tilda), а не просто отдельных мелких элементов.
2. **Drag-and-drop:** Интерфейс для удобного перемещения блоков и элементов.
3. **Шаблоны:** Наличие готовых шаблонов для различных типов сайтов (блог, портфолио, интернет-магазин и т.д.).
4. **Элементы контента:** Поддержка добавления и кастомизации текста, изображений, видео, форм, кнопок и других виджетов.
5. **Адаптивность:** Генерируемые сайты должны автоматически подстраиваться под десктопы, планшеты и смартфоны.
6. **Многостраничность:** Поддержка создания нескольких страниц в рамках одного сайта с настройкой внутренней навигации.
7. **SEO-настройки:** Возможность управления мета-тегами (title, description, keywords), заголовками и другими SEO-параметрами для каждой страницы.
8. **Управление доменами:** 
   - Привязка пользовательских доменных имен к сайтам.
   - Автоматическая генерация и настройка HTTPS-сертификатов при успешном направлении домена на IP сервера.
9. **Авторизация:** Единая система входа. Авторизация пользователей производится через API-запрос к `https://app.akm-advisor.com` для подтверждения аккаунта.

## 4. Правила работы для AI-агента
- **Стиль кода:** Использовать только Vue 3 Composition API.
- **Комментарии:** Все комментарии в коде должны быть написаны на американском английском (American English).
- **API запросы:** Использовать исключительно настроенный инстанс axios из `/src/api`.
- **Отчетность:** После завершения каждой задачи обязательно оставлять краткий комментарий с описанием внесенных изменений или способа решения проблемы.
- **Безопасность:** Ключ агента (`X-Agent-Key`) хранится в `.env.agent`. Этот файл **СТРОГО ЗАПРЕЩЕНО** коммитить в Git (должен быть в `.gitignore`).
- **Workflow:** Строго следовать Kanban-процессу через API агента (взятие задачи -> `in_progress` -> `review` -> `done`).



## 5. Дополнительные требования
- отдельная страница с логами ошибок системы закрыта nginx авторизацией
- отдельный API для агента посмотреть логи
- Swagger для API

- **Документация:** Все функции и компоненты должны быть документированы с помощью JSDoc или аналогичного стандарта.
- **deploy:** Процесс деплоя должен быть автоматизирован с помощью Make 
команды make:
   make update
   make run
   make stop

